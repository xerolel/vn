<DOCTYPE htm> 
  <html lang="en">
    <head> 
      <meta charset="UTF-8">
      <title>In Plain Sight</title>
      <style>
        body {
          margin: 0;
          background: black;
          font-family: "Courier New", monospace;
          overflow: hidden;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh
        }

        #game-container {
          width: 1280px;
          height: 720px;
          background: black;
          position: relative;
          overflow: hidden;
          border: 10px solid black;
          box-sizing: content-box
        }

        #scene-img, #sprite-kuzuru, #sprite-yume, #opening-gif, #background {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          z-index: 0;
        }


        #sprite-kuzuru, #sprite-yume {
          bottom: 0;
          display: none;
          z-index: 1;
        }

        #dialogue-box {
          position: absolute;
          bottom: 0;
          left: 50%;
          transform: translateX(-50%);
          width: 90%;
          padding: 20px;
          background: rgba(0,0,0,0.85);
          border-top: 3px solid white;
          color: white;
          font-size: 18px;
          line-height: 1.5;
          display: none;
          z-index: 2;
        }

        #choices {
          margin-top: 15px;
          display: flex;
          flex-direction: column;
          gap: 10px;
        }

        .choice-btn {
          background: black;
          color: white;
          border: 2px solid white;
          padding: 10px;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.2s ease;

        }

        .choice-btn:hover {
          background:white;
          color:black;
        }
        
        
        #play-button {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: black;
          color: white;
          font-size: 28px;
          padding: 15px 50px;
          border: 3px solid white;
          cursor: pointer;
          display: none;
          z-index: 3;
        }

      #play-button:hover { background:white; color:black; }
      </style>
      </head>
      <body>
        <div id="game container">
          <img id="opening gif" src="for vn.gif">
          <img id="scene-img" src="">
          <img id="background" src="for vn.gif">
          <img id="sprite-kuzuru" src="for vn.gif">
          <img id="sprite-yume" src="for vn.gif">
          <img id="dialogue-box" src="for vn.gif">
          <img id="dialogue-text" src="for vn.gif">
         <p id="choices"></div>
         </div>
         <button id = "play-button">play</button>
        </div>
        <script>

          const openingGif = document.getElementbyId("opening-gif");
          const playButton = document.getElementById("play-button");
          const dialogueBox = document.getElementbyId("dialogue-box");
          const dialogueText = document.getElementbyId("dialogue-text");
          const choicesDiv = document.getElementbyId("choices");
          const sceneImg = document.getElementbyId("scene-img");
          const spriteKuzuru = document.getElementbyId("sprite-kuzuru");
          const spriteYume = document.getElementbyId("sprite-yume");
          const background = document.getElementbyId("background");

          openingGif.addEventListener("load", () => {
            setTimeout(()  => {
              openingGif.style.display="none";
              playButton.style.display="block";
            }, 1200);
          });
          
          // play button ! 
          playButton.addEventListener("click", () => {
            playButton.style.display="none";
            startIntro();
          });
        
          // game state 
          let currentLine=0;
          let dialogueLine=[];
          let sceneCallback=null;

          // advance dialogue
          function advanceDialogue(){
            currentLine++;
            if(currentLine<dialogueLines.length){
              const line = dialogueLines[currentLine];
              dialogueText.innerHTML = line.text;

              if(line.background !== undefined){
                background.style.display="block";
                background.src = line.background;
              } else {
                background.style.display="none";
                background.src = "";
              }

              // scene images
              if(line.scene){
                sceneImg.src = line.scene;
              }

              // handle sprites. auto hide them if not defined
              if(line.kuzuru !== undefined){
                if(line.kuzuru === ""){
                  spriteKuzuru.style.display="none";
                  spriteKuzuru.src="";
                } else {
                  spriteKuzuru.style.display="block";
                  spriteKuzuru.src = line.kuzuru;
                }
              } else { 
                spriteKuzuru.style.display="none";
                spriteKuzuru.src="";
              }
              
             
              if(line.yume !== undefined){
                if(line.yume === ""){
                  spriteYume.style.display="none";
                  spriteYume.src="";
                } else {
                  spriteYume.style.display="block";
                  spriteYume.src = line.kuzuru;
                }
              } else { 
                spriteYume.style.display="none";
                spriteYume.src="";
              }

            } else {
              if(sceneCallback) sceneCallback();
            }
          }

          // multi choice in case
          function showChoices(options){
            choicesDiv.innerHTML="";
            options.forEach(opt=>{
              const btn=document.createElement("button");
              btn.className="choice-btn";
              btn.textContent=opt.text;
              btn.onclick=()=>{
                opt.action();
                choicesDiv.innerHTML="";
              };
              choicesDiv.appendChild(btn);
            });
          }

          
        